<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BONK Clicker</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src='//whephiwums.com/vignette.min.js' data-zone='8946116' data-sdk='show_8946116'></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: linear-gradient(135deg, #1A1B1E, #2C2D31);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            padding-bottom: 70px;
        }

        .game-container {
            max-width: 500px;
            width: 100%;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .score-board {
            background: rgba(99, 102, 241, 0.1);
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(99, 102, 241, 0.2);
        }

        .score {
            font-size: 40px;
            font-weight: bold;
            background: linear-gradient(45deg, #6366F1, #8B5CF6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
            margin: 10px 0;
        }

        .bonk-emoji {
            font-size: 100px;
            cursor: pointer;
            transition: transform 0.1s;
            display: inline-block;
            margin: 20px;
            filter: drop-shadow(0 0 20px rgba(99, 102, 241, 0.3));
            animation: float 2s infinite ease-in-out;
            position: relative;
        }

        .bonk-emoji:active {
            transform: scale(0.9);
            animation: none;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }

        .upgrade-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .upgrade-btn {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.2);
            color: white;
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            backdrop-filter: blur(5px);
        }

        .upgrade-btn:hover {
            background: rgba(99, 102, 241, 0.2);
            transform: translateY(-2px);
        }

        .upgrade-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 2;
        }

        .particle {
            position: absolute;
            pointer-events: none;
            animation: particle 0.8s ease-out forwards;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
        }

        @keyframes particle {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(0);
                opacity: 0;
            }
        }

        .boost-active {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #6366F1, #8B5CF6);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            z-index: 3;
            animation: pulse 2s infinite;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
        }

        @keyframes pulse {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
            100% { transform: translateX(-50%) scale(1); }
        }

        .stats-bar {
            position: fixed;
            bottom: 70px;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 10px;
            display: flex;
            justify-content: space-around;
            font-size: 14px;
            z-index: 2;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-weight: bold;
            color: #6366F1;
        }

        .banner-ad {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            height: 60px;
            z-index: 4;
        }

        .top-banner {
            margin-bottom: 20px;
            width: 100%;
            max-width: 500px;
            height: 90px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
        }

        .achievement {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(99, 102, 241, 0.9);
            padding: 15px;
            border-radius: 12px;
            transform: translateX(120%);
            transition: transform 0.3s;
            z-index: 3;
        }

        .achievement.show {
            transform: translateX(0);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- √úst Banner Reklam -->
        <div class="top-banner" id="topBanner">
            <!-- Banner reklam kodu buraya -->
        </div>

        <div class="score-board">
            <h2>BONK Sayacƒ±</h2>
            <p class="score" id="score">0</p>
            <p id="perClick">Her tƒ±klama: 1 BONK</p>
        </div>

        <div class="bonk-emoji" id="bonkEmoji">ü™ô</div>

        <div class="upgrade-grid">
            <button class="upgrade-btn" onclick="watchAdForBoost()">
                ‚ö° 2x Bonus (30s)
            </button>
            <button class="upgrade-btn" onclick="buyAutoClicker()" id="autoClickerBtn">
                ü§ñ Auto Clicker: 100 BONK
            </button>
            <button class="upgrade-btn" onclick="upgradeClickValue()" id="upgradeBtn">
                üí™ G√º√ß Artƒ±r: 50 BONK
            </button>
        </div>
    </div>

    <div class="stats-bar">
        <div class="stat-item">
            <div class="stat-value" id="totalClicks">0</div>
            <div>Toplam Tƒ±klama</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="autoPower">0</div>
            <div>Otomatik/s</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="clickPower">1</div>
            <div>Tƒ±klama G√ºc√º</div>
        </div>
    </div>

    <div class="particles" id="particles"></div>
    <div id="boostTimer" class="boost-active" style="display: none">
        2x Bonus: <span id="boostTimeLeft">30</span>s
    </div>

    <div class="achievement" id="achievement">
        üèÜ Ba≈üarƒ± Kazanƒ±ldƒ±!
    </div>

    <!-- Alt Banner Reklam -->
    <div class="banner-ad" id="bottomBanner">
        <!-- Banner reklam kodu buraya -->
    </div>

    <script>
        // Telegram WebApp
        const tg = window.Telegram.WebApp;
        if (tg) tg.expand();

        // Oyun Durumu
        const gameState = {
            score: 0,
            clickValue: 1,
            boostActive: false,
            boostTimeLeft: 0,
            boostInterval: null,
            autoClickerCount: 0,
            autoClickerInterval: null,
            totalClicks: 0,
            achievements: new Set()
        };

        // DOM Elementleri
        const bonkEmoji = document.getElementById('bonkEmoji');
        const scoreElement = document.getElementById('score');
        const perClickElement = document.getElementById('perClick');
        const particlesContainer = document.getElementById('particles');
        const boostTimer = document.getElementById('boostTimer');
        const boostTimeLeft = document.getElementById('boostTimeLeft');
        const totalClicksElement = document.getElementById('totalClicks');
        const autoPowerElement = document.getElementById('autoPower');
        const clickPowerElement = document.getElementById('clickPower');

        // BONK'a tƒ±klama
        bonkEmoji.addEventListener('click', () => {
            gameState.score += gameState.clickValue;
            gameState.totalClicks++;
            updateScore();
            createParticles();
            checkAchievements();
            
            // Emoji animasyonu
            bonkEmoji.style.transform = 'scale(0.9)';
            setTimeout(() => {
                bonkEmoji.style.transform = 'scale(1)';
            }, 100);
        });

        // Auto Clicker satƒ±n alma
        function buyAutoClicker() {
            if (gameState.score >= 100) {
                gameState.score -= 100;
                gameState.autoClickerCount++;
                updateAutoClicker();
                updateScore();
                showAchievement('ü§ñ Auto Clicker Aktif!');
            }
        }

        // Auto Clicker g√ºncelleme
        function updateAutoClicker() {
            if (gameState.autoClickerInterval) {
                clearInterval(gameState.autoClickerInterval);
            }

            if (gameState.autoClickerCount > 0) {
                gameState.autoClickerInterval = setInterval(() => {
                    gameState.score += gameState.autoClickerCount;
                    gameState.totalClicks += gameState.autoClickerCount;
                    updateScore();
                }, 1000);
            }

            autoPowerElement.textContent = gameState.autoClickerCount;
        }

        // Tƒ±klama g√ºc√ºn√º artƒ±r
        function upgradeClickValue() {
            if (gameState.score >= 50) {
                gameState.score -= 50;
                gameState.clickValue++;
                updateScore();
                clickPowerElement.textContent = gameState.clickValue;
                showAchievement('üí™ G√º√ß Arttƒ±rƒ±ldƒ±!');
            }
        }

        // Skor g√ºncelleme
        function updateScore() {
            scoreElement.textContent = Math.floor(gameState.score);
            perClickElement.textContent = `Her tƒ±klama: ${gameState.clickValue} BONK`;
            totalClicksElement.textContent = gameState.totalClicks;
            
            // Buton durumlarƒ±nƒ± g√ºncelle
            document.getElementById('autoClickerBtn').classList.toggle('disabled', gameState.score < 100);
            document.getElementById('upgradeBtn').classList.toggle('disabled', gameState.score < 50);
        }

        // Reklam izleme ve bonus
        async function watchAdForBoost() {
            try {
                await show_8946116();
                activateBoost();
                showAchievement('‚ö° 2x Bonus Aktif!');
            } catch (error) {
                console.error('Reklam hatasƒ±:', error);
            }
        }

        // Bonus aktivasyonu
        function activateBoost() {
            const oldClickValue = gameState.clickValue;
            gameState.clickValue *= 2;
            gameState.boostActive = true;
            gameState.boostTimeLeft = 30;
            
            boostTimer.style.display = 'block';
            updateBoostTimer();

            if (gameState.boostInterval) {
                clearInterval(gameState.boostInterval);
            }

            gameState.boostInterval = setInterval(() => {
                gameState.boostTimeLeft--;
                updateBoostTimer();

                if (gameState.boostTimeLeft <= 0) {
                    gameState.clickValue = oldClickValue;
                    gameState.boostActive = false;
                    boostTimer.style.display = 'none';
                    clearInterval(gameState.boostInterval);
                    updateScore();
                }
            }, 1000);
        }

        // Bonus zamanlayƒ±cƒ± g√ºncelleme
        function updateBoostTimer() {
            boostTimeLeft.textContent = gameState.boostTimeLeft;
        }

        // Par√ßacƒ±k efekti
        function createParticles() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.textContent = '+' + gameState.clickValue;
            
            const x = event.clientX;
            const y = event.clientY;
            
            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            
            particlesContainer.appendChild(particle);
            
            setTimeout(() => {
                particle.remove();
            }, 800);
        }

        // Ba≈üarƒ± kontrol√º
        function checkAchievements() {
            const achievements = [
                { id: 'clicks100', condition: () => gameState.totalClicks >= 100, message: 'üéØ 100 Tƒ±klama!' },
                { id: 'clicks1000', condition: () => gameState.totalClicks >= 1000, message: 'üéØ 1000 Tƒ±klama!' },
                { id: 'score5000', condition: () => gameState.score >= 5000, message: 'üí∞ 5000 BONK!' },
                { id: 'auto5', condition: () => gameState.autoClickerCount >= 5, message: 'ü§ñ 5 Auto Clicker!' },
                { id: 'power10', condition: () => gameState.clickValue >= 10, message: 'üí™ S√ºper G√º√ß!' }
            ];

            achievements.forEach(achievement => {
                if (!gameState.achievements.has(achievement.id) && achievement.condition()) {
                    gameState.achievements.add(achievement.id);
                    showAchievement(achievement.message);
                }
            });
        }

        // Ba≈üarƒ± g√∂sterimi
        function showAchievement(message) {
            const achievement = document.getElementById('achievement');
            achievement.textContent = message;
            achievement.classList.add('show');
            
            setTimeout(() => {
                achievement.classList.remove('show');
            }, 3000);
        }

        // Verileri kaydetme
        async function saveGameData() {
            if (!tg.initDataUnsafe?.user?.id) return;

            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_CONFIG.binId}/latest`, {
                    headers: {
                        'X-Master-Key': JSONBIN_CONFIG.apiKey
                    }
                });
                
                const data = await response.json();
                if (!data.users) data.users = {};
                
                const userId = tg.initDataUnsafe.user.id;
                
                data.users[userId] = {
                    ...data.users[userId],
                    clickerScore: Math.max(data.users[userId]?.clickerScore || 0, gameState.score),
                    bonkBalance: (data.users[userId]?.bonkBalance || 0) + gameState.score,
                    lastPlayed: new Date().toISOString(),
                    achievements: Array.from(gameState.achievements),
                    stats: {
                        totalClicks: gameState.totalClicks,
                        autoClickers: gameState.autoClickerCount,
                        clickPower: gameState.clickValue
                    }
                };

                await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_CONFIG.binId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': JSONBIN_CONFIG.apiKey
                    },
                    body: JSON.stringify(data)
                });
            } catch (error) {
                console.error('Veri kaydetme hatasƒ±:', error);
            }
        }

        // Oyun verilerini periyodik olarak kaydet
        setInterval(saveGameData, 30000);

        // Sayfa kapatƒ±lmadan √∂nce verileri kaydet
        window.addEventListener('beforeunload', saveGameData);

        // √ñnceki verileri y√ºkle
        async function loadGameData() {
            if (!tg.initDataUnsafe?.user?.id) return;

            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_CONFIG.binId}/latest`, {
                    headers: {
                        'X-Master-Key': JSONBIN_CONFIG.apiKey
                    }
                });
                
                const data = await response.json();
                const userId = tg.initDataUnsafe.user.id;
                const userData = data.users?.[userId];

                if (userData) {
                    // Ba≈üarƒ±larƒ± y√ºkle
                    if (userData.achievements) {
                        userData.achievements.forEach(id => gameState.achievements.add(id));
                    }

                    // ƒ∞statistikleri y√ºkle
                    if (userData.stats) {
                        gameState.autoClickerCount = userData.stats.autoClickers || 0;
                        gameState.clickValue = userData.stats.clickPower || 1;
                        updateAutoClicker();
                        updateScore();
                    }
                }
            } catch (error) {
                console.error('Veri y√ºkleme hatasƒ±:', error);
            }
        }

        // Sayfa y√ºklendiƒüinde
        window.onload = function() {
            loadGameData();
        };
    </script>
</body>
</html>